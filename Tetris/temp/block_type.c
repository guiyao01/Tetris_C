#include <stdio.h>
#include <time.h>
#include <stdlib.h>

    int shape[7][4][18] = {
        {                                 
            {1,1,0,0, 1,1,0,0, 0,0,0,0, 0,0,0,0, 2,2},      //
            {1,1,0,0, 1,1,0,0, 0,0,0,0, 0,0,0,0, 2,2},      //  [][]
            {1,1,0,0, 1,1,0,0, 0,0,0,0, 0,0,0,0, 2,2},      //  [][]
            {1,1,0,0, 1,1,0,0, 0,0,0,0, 0,0,0,0, 2,2}       //             
        },
        {
            {1,1,1,1, 0,0,0,0, 0,0,0,0, 0,0,0,0, 0,3},  //  [][][][]  []
            {1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0, 3,0},  //            []
            {1,1,1,1, 0,0,0,0, 0,0,0,0, 0,0,0,0, 0,3},  //            []
            {1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0, 3,0}   //            []
        },
        {
            {0,1,0,0, 1,1,1,0, 0,0,0,0, 0,0,0,0, 1,2},  //  []      []      [][][]     []
            {1,0,0,0, 1,1,0,0, 1,0,0,0, 0,0,0,0, 2,1},  //[][][]    [][]      []     [][]
            {1,1,1,0, 0,1,0,0, 0,0,0,0, 0,0,0,0, 1,2},  //          []                 []
            {0,1,0,0, 1,1,0,0, 0,1,0,0, 0,0,0,0, 2,1}   //
        },
        {
            {1,1,0,0, 0,1,1,0, 0,0,0,0, 0,0,0,0, 1,2},   //  [][]        []
            {0,1,0,0, 1,1,0,0, 1,0,0,0, 0,0,0,0, 2,1},   //    [][]    [][]
            {1,1,0,0, 0,1,1,0, 0,0,0,0, 0,0,0,0, 1,2},   //            []
            {0,1,0,0, 1,1,0,0, 1,0,0,0, 0,0,0,0, 2,1}
        },
        {
            {0,1,1,0, 1,1,0,0, 0,0,0,0, 0,0,0,0, 1,2},   //    [][]    []
            {1,0,0,0, 1,1,0,0, 0,1,0,0, 0,0,0,0, 2,1},   //  [][]      [][]
            {0,1,1,0, 1,1,0,0, 0,0,0,0, 0,0,0,0, 1,2},   //              []
            {1,0,0,0, 1,1,0,0, 0,1,0,0, 0,0,0,0, 2,1}    //
        },
        {   
            {1,0,0,0, 1,1,1,0, 0,0,0,0, 0,0,0,0, 1,2},   //   []       [][]   [][][]    []
            {1,1,0,0, 1,0,0,0, 1,0,0,0, 0,0,0,0, 2,1},   //   [][][]   []         []    []
            {1,1,1,0, 0,0,1,0, 0,0,0,0, 0,0,0,0, 1,2},   //            []             [][]
            {0,1,0,0, 0,1,0,0, 1,1,0,0, 0,0,0,0, 2,1}    //
        },
        {
            {0,0,1,0, 1,1,1,0, 0,0,0,0, 0,0,0,0, 1,2},    //     []   []      [][][]  [][]
            {1,0,0,0, 1,0,0,0, 1,1,0,0, 0,0,0,0, 2,1},    // [][][]   []      []        []
            {1,1,1,0, 1,0,0,0, 0,0,0,0, 0,0,0,0, 1,2},    //          [][]              []
            {1,1,0,0, 0,1,0,0, 0,1,0,0, 0,0,0,0, 2,1}     //
        }
    };


// n 图案
// m 方向
// x,y 坐标
// c 颜色
void print_mode_shape(int n,int m,int x,int y,int c){
    int xx = x;
    int yy = y;

    for(int i = 0;i<16;i++){
        if(i % 4 == 0 && i != 0){
            yy++;
            xx = x;
        }
        if(shape[n][m][i] == 1){
            printf("\033[%d;%dH",yy,xx);
            printf("\033[%dm[]",c);
            printf("\033[0m");
        }
        xx+=2;
        
    }
}

void init_shape(){
    int n,m,c;
    srandom(time(NULL));
    n = random() % 7;
    m = random() % 4;
    c = random() % 7 + 40;
    print_mode_shape(n,m,6,6,c);
}

void eraser_shape(int n,int m,int x,int y){
    int xx = x;
    int yy = y;
    for(int i = 0;i < 16;i++){
        if(i % 4 == 0 && i != 0){
            yy ++;
            xx = x;
        }
        if(shape[n][m][i] == 1){
            printf("\033[%d;%dH  \033[0m",yy,xx);
        }
        xx += 2;
    }
    fflush(NULL);
}

void change_shape(int n,int m,int x,int y,int c){
    int mm = (m + 1) % 4;
    eraser_shape(n,m,x,y);
    print_mode_shape(n,mm,x,y,c);
}


int main(){
    int x = 6,y = 6;
    printf("\033[2J");
    // for(int i = 0;i<7;i++){
    //     for(int j = 0;j<4;j++){
    //         print_mode_shape(i,j,x,y,43);
    //         x += 12;
    //     }

    //     x = 6;
    //     y += 5;

    //     printf("\n");
    //     getchar();
    // }
    init_shape();
    printf("\033[?25h");
}
